<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Wheel Engine Base</title>

<style>
body{
font-family:Arial;
background:black;
color:white;
text-align:center;
}

.panel{
background:#111;
margin:20px auto;
padding:20px;
border-radius:15px;
max-width:700px;
}

button{
padding:12px 20px;
margin:8px;
border:none;
border-radius:10px;
}
</style>
</head>

<body>

<h1>ðŸŽ® Wheel Engine Base</h1>

<div class="panel">
<input id="playerName" placeholder="Character Name">
<button onclick="spin()">Spin</button>
<div id="spinTimer"></div>
</div>

<div class="panel">
<h3>Results</h3>
<div id="results"></div>
</div>

<div class="panel">
<h3>Fusion Lab (Coming Soon)</h3>
<div id="fusionPreview">No fusion yet</div>
</div>

<div class="panel">
<h3>PvE Test</h3>
<button onclick="fight()">Fight AI</button>
<div id="fightLog"></div>
</div>

<div class="panel">
<h3>Admin</h3>
<input id="adminPass" placeholder="Password">
<button onclick="openAdmin()">Open</button>
<div id="adminArea"></div>
</div>

<script>

// ===== SETTINGS =====
const ADMIN = "226wheel";

// ===== BAD WORD FILTER =====
const badWords = ["badword1","badword2"];

// ===== WHEEL SYSTEM BASE =====
let wheels = {

species:[
{name:"Human",chance:50,fusion:["life"]},
{name:"Elf",chance:30,fusion:["nature"]},
{name:"Void",chance:20,fusion:["dark"]}
],

power:[
{name:"Fire",chance:40,fusion:["fire"]},
{name:"Ice",chance:40,fusion:["ice"]},
{name:"Time",chance:20,fusion:["time"]}
]

};

// ===== UNLOCK STORAGE =====
let unlocked = JSON.parse(localStorage.getItem("unlocked")||"{}");

// ===== NAME FILTER =====
function validName(name){

name = name.toLowerCase();

for(let w of badWords){
if(name.includes(w)) return false;
}

return true;
}

// ===== DAILY SPIN =====
function canSpin(){

let last = localStorage.getItem("lastSpin");

if(!last) return true;

return Date.now() - last > 86400000;
}

// ===== % RANDOM =====
function pick(list){

let total = list.reduce((a,b)=>a+b.chance,0);
let roll = Math.random()*total;

let sum=0;

for(let item of list){
sum+=item.chance;
if(roll<=sum) return item;
}
}

// ===== SPIN ENGINE =====
function spin(){

let name = playerName.value;

if(!validName(name)){
alert("Name not allowed");
return;
}

if(!canSpin()){
spinTimer.textContent = "Spin available tomorrow";
return;
}

localStorage.setItem("lastSpin",Date.now());

let result = {};

for(let key in wheels){
result[key] = pick(wheels[key]);
unlock(key,result[key].name);
}

showResults(result);
previewFusion(result);

}

// ===== UNLOCK =====
function unlock(cat,trait){

if(!unlocked[cat]) unlocked[cat]=[];

if(!unlocked[cat].includes(trait)){
unlocked[cat].push(trait);
localStorage.setItem("unlocked",JSON.stringify(unlocked));
}

}

// ===== SHOW RESULTS =====
function showResults(r){

results.innerHTML="";

for(let k in r){
results.innerHTML += "<div>"+k+": "+r[k].name+"</div>";
}

}

// ===== FUSION PREVIEW =====
function previewFusion(r){

let tags=[];

for(let k in r){
tags.push(...r[k].fusion);
}

fusionPreview.textContent =
"Fusion Tags: "+tags.join(", ");

}

// ===== PVE =====
function fight(){

let power = Object.keys(unlocked).length * 20 + Math.random()*50;
let enemy = Math.random()*150;

fightLog.textContent =
power>enemy ? "Victory!" : "Defeat";

}

// ===== ADMIN =====
function openAdmin(){

if(adminPass.value!==ADMIN){
alert("Wrong password");
return;
}

adminArea.innerHTML = `
<input id="wheelName" placeholder="Wheel Name">
<input id="traitName" placeholder="Trait">
<input id="chance" placeholder="%">
<button onclick="addTrait()">Add</button>
`;

}

function addTrait(){

let w = wheelName.value;
if(!wheels[w]) wheels[w]=[];

wheels[w].push({
name:traitName.value,
chance:Number(chance.value),
fusion:["custom"]
});

alert("Added!");

}

</script>
</body>
</html>
