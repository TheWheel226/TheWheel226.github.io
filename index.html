<!-- =========================
PART 1 / 6 â€” index.html (doctype + head + styles)
PASTE FIRST
========================= -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wheel Forge</title>

  <style>
    :root{
      --bg:#0b0d12;
      --panel:#121827;
      --panel2:#0f1422;
      --line:rgba(255,255,255,.09);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --good:#4dff9a;
      --bad:#ff5a6a;
      --warn:#ffd24d;

      --chip:rgba(255,255,255,.08);
      --chip2:rgba(255,255,255,.12);

      --glow: 0 0 24px rgba(255,0,60,.35), 0 0 60px rgba(255,0,60,.18);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow-x:hidden;
    }

    /* Background image layer */
    #bgImage{
      position:fixed;
      inset:0;
      background-size:cover;
      background-position:center;
      filter: blur(0px) saturate(1.05);
      opacity:.24;
      z-index:-2;
    }
    #bgShade{
      position:fixed;
      inset:0;
      background: radial-gradient(1200px 700px at 20% 10%, rgba(255,255,255,.07), transparent 55%),
                  linear-gradient(180deg, rgba(0,0,0,.70), rgba(0,0,0,.86));
      z-index:-1;
    }

    /* Layout */
    .wrap{
      max-width:1180px;
      margin:0 auto;
      padding:18px 14px 40px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      border:1px solid var(--line);
      background:rgba(18,24,39,.78);
      border-radius:14px;
      backdrop-filter: blur(8px);
    }
    .title{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
      letter-spacing:.3px;
    }
    .pill{
      padding:7px 10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      border:1px solid var(--line);
      font-size:12px;
      color:var(--muted);
    }
    .controls{
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    /* Buttons */
    .btn{
      border:1px solid var(--line);
      background:rgba(255,255,255,.08);
      color:var(--text);
      padding:9px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:800;
      letter-spacing:.2px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      user-select:none;
      transition: transform .06s ease, background .12s ease, border-color .12s ease;
    }
    .btn:hover{ background:rgba(255,255,255,.11); }
    .btn:active{ transform: translateY(1px) scale(.995); }
    .btn.primary{
      background:rgba(110,160,255,.16);
      border-color:rgba(110,160,255,.35);
    }
    .btn.good{
      background:rgba(77,255,154,.14);
      border-color:rgba(77,255,154,.35);
    }
    .btn.bad{
      background:rgba(255,90,106,.14);
      border-color:rgba(255,90,106,.35);
    }

    /* Tabs */
    .tabs{
      margin-top:14px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .tab{
      padding:9px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.07);
      cursor:pointer;
      font-weight:900;
      color:var(--muted);
    }
    .tab.active{
      background:rgba(255,255,255,.12);
      color:var(--text);
      border-color:rgba(255,255,255,.18);
    }

    /* Panels */
    .grid{
      margin-top:14px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:12px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }
    .panel{
      border:1px solid var(--line);
      background:rgba(18,24,39,.72);
      border-radius:16px;
      padding:12px;
      overflow:hidden;
      position:relative;
    }
    .panelHeader{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      margin-bottom:10px;
    }
    .panelTitle{
      font-size:16px;
      font-weight:950;
      margin:0;
    }
    .panelSub{
      font-size:12px;
      color:var(--muted);
      margin-top:4px;
    }
    .muted{ color:var(--muted); }

    /* Wheel */
    .wheelRow{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:12px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .wheelRow{ grid-template-columns: 1fr; }
    }
    .wheelBox{
      border:1px solid var(--line);
      background:rgba(15,20,34,.70);
      border-radius:16px;
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    canvas{
      width:100%;
      height:auto;
      border-radius:16px;
      background:rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.07);
    }
    .hint{
      font-size:12px;
      color:var(--muted);
    }
    .phaseTag{
      font-size:12px;
      color:var(--muted);
      padding:6px 10px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      border-radius:999px;
      width:max-content;
    }
    .phaseTag.cursed{
      color:#ffd6de;
      border-color:rgba(255,0,60,.35);
      box-shadow: 0 0 0 1px rgba(255,0,60,.18) inset;
    }

    /* Build stats list */
    .statsList{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .statLine{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      padding:8px 10px;
      border:1px solid var(--line);
      border-radius:12px;
      background:rgba(255,255,255,.06);
    }
    .statKey{ color:var(--muted); font-weight:900; font-size:12px; }
    .statVal{ font-weight:950; font-size:12px; text-align:right; }

    .badges{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:8px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:7px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.07);
      font-weight:950;
      font-size:12px;
      color:var(--text);
    }
    .badge .icon{ font-size:14px; }
    .badge.cursed{
      border-color:rgba(255,0,60,.35);
      background:rgba(255,0,60,.10);
      color:#ffd6de;
    }

    /* Portrait frames */
    .portraitGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    .portraitFrame{
      border:1px solid var(--line);
      border-radius:16px;
      background:rgba(15,20,34,.70);
      min-height:360px;
      position:relative;
      overflow:hidden;
    }
    .portraitFrame.bigRig{ min-height:420px; }
    .portraitFrame.cursed{ box-shadow: var(--glow); border-color:rgba(255,0,60,.30); }
    .portraitInner{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .layer{
      position:absolute;
      width: 78%;
      max-width: 420px;
      height:auto;
      image-rendering:auto;
      filter: drop-shadow(0 12px 22px rgba(0,0,0,.35));
      opacity:1;
      pointer-events:none;
    }
    .layer.fx{ width:86%; opacity:.92; mix-blend-mode: screen; }
    .layer.fx.on{ opacity:.95; }
    .layer.armor{ width:84%; }
    .layer.weapon{ width:88%; }

    /* idle animations */
    .idle-sway .layer{ animation: sway 3.6s ease-in-out infinite; transform-origin: 50% 70%; }
    .idle-heavy .layer{ animation: heavy 4.2s ease-in-out infinite; transform-origin: 50% 75%; }
    @keyframes sway{
      0%,100%{ transform: translateY(0px) rotate(-.6deg); }
      50%{ transform: translateY(-4px) rotate(.6deg); }
    }
    @keyframes heavy{
      0%,100%{ transform: translateY(0px) rotate(-.25deg); }
      50%{ transform: translateY(-3px) rotate(.25deg); }
    }
    .portraitUnlockPulse{ animation: pulse 0.55s ease-out; }
    @keyframes pulse{
      0%{ transform: scale(1); }
      45%{ transform: scale(1.02); }
      100%{ transform: scale(1); }
    }

    /* Trait slots */
    .slotGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width:540px){ .slotGrid{ grid-template-columns:1fr; } }
    .slotCard{
      border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      border-radius:14px;
      padding:10px;
      position:relative;
      overflow:hidden;
      cursor:pointer;
    }
    .slotCard.slotLocked{
      background:rgba(255,255,255,.05);
      opacity:.95;
    }
    .slotCard.closestSlot{
      border-color:rgba(255,210,77,.35);
      box-shadow: 0 0 0 1px rgba(255,210,77,.18) inset;
    }
    .slotTop{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-bottom:8px;
    }
    .slotName{ font-weight:950; }
    .slotDesc{ font-size:12px; color:var(--muted); }
    .slotProgressWrap{
      margin-top:10px;
      height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.09);
      overflow:hidden;
    }
    .slotProgressBar{
      height:100%;
      border-radius:999px;
      background: linear-gradient(90deg, rgba(255,210,77,.9), rgba(255,255,255,.20));
      width:0%;
      transition: width .35s ease;
    }
    .slotProgressText{
      margin-top:7px;
      font-size:12px;
      color:var(--muted);
      font-weight:800;
    }
    .barPulse{ animation: barpulse .65s ease-out; }
    @keyframes barpulse{
      0%{ filter:brightness(1); }
      50%{ filter:brightness(1.35); }
      100%{ filter:brightness(1); }
    }
    .plusOne{
      position:absolute;
      right:10px;
      bottom:10px;
      font-weight:1000;
      color:var(--warn);
      animation: floatUp .65s ease-out forwards;
      text-shadow: 0 8px 18px rgba(0,0,0,.35);
    }
    @keyframes floatUp{
      0%{ transform: translateY(0); opacity:0; }
      25%{ opacity:1; }
      100%{ transform: translateY(-18px); opacity:0; }
    }

    /* Logs */
    .log{
      height:260px;
      overflow:auto;
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(0,0,0,.22);
      padding:10px;
      font-size:12px;
      color:rgba(255,255,255,.88);
    }

    /* HP bars */
    .hpWrap{
      border:1px solid var(--line);
      border-radius:999px;
      background:rgba(255,255,255,.06);
      height:12px;
      overflow:hidden;
    }
    .hpBar{
      height:100%;
      width:100%;
      background: linear-gradient(90deg, rgba(77,255,154,.95), rgba(255,255,255,.20));
      transition: width .20s ease;
    }
    .hpBar.enemy{
      background: linear-gradient(90deg, rgba(255,90,106,.95), rgba(255,255,255,.20));
    }

    /* Toast */
    #toast{
      position:fixed;
      left:50%;
      bottom:22px;
      transform: translateX(-50%) translateY(16px);
      background:rgba(0,0,0,.78);
      border:1px solid rgba(255,255,255,.12);
      padding:10px 14px;
      border-radius:999px;
      color:var(--text);
      font-weight:900;
      opacity:0;
      pointer-events:none;
      transition: opacity .15s ease, transform .15s ease;
      z-index:50;
      max-width:92vw;
      text-align:center;
    }
    #toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(0px);
    }

    /* Modals */
    .modal{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
      background:rgba(0,0,0,.70);
      z-index:60;
    }
    .modal.hidden{ display:none; }
    .modalCard{
      width:min(560px, 96vw);
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(18,24,39,.92);
      padding:14px;
      box-shadow: 0 20px 70px rgba(0,0,0,.45);
    }
    .modalTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .modalTitle{ font-size:16px; font-weight:1000; margin:0; }
    .modalSub{ margin:4px 0 0; font-size:12px; color:var(--muted); }
    .field{
      display:flex;
      flex-direction:column;
      gap:6px;
      margin:10px 0;
    }
    input[type="text"]{
      width:100%;
      padding:11px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.22);
      color:var(--text);
      outline:none;
      font-weight:900;
    }

    /* Loot rows */
    .lootCol{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:10px;
    }
    .lootRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px;
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.06);
    }
    .lootLeft{ display:flex; flex-direction:column; gap:3px; }
    .lootLabel{ font-weight:1000; font-size:12px; }
    .lootNote{ color:var(--muted); font-size:12px; }
    .lootValue{ font-weight:1000; font-size:12px; text-align:right; }

    /* Confetti */
    .confetti{
      position:fixed;
      left:50%;
      top:22%;
      width:1px;
      height:1px;
      z-index:90;
      pointer-events:none;
    }
    .confettiPiece{
      position:absolute;
      width:10px;
      height:10px;
      border-radius:3px;
      transform: translate(0,0) rotate(0);
      animation: confetti 0.75s ease-out forwards;
    }
    .confettiPiece{
      --dx: 0px;
      --dy: 0px;
      --rot: 0deg;
    }
    @keyframes confetti{
      0%{ transform: translate(0,0) rotate(0deg); opacity:0; }
      15%{ opacity:1; }
      100%{ transform: translate(var(--dx), var(--dy)) rotate(var(--rot)); opacity:0; }
    }

    /* Steal UI */
    #stealPopup{
      position:fixed;
      top:14px;
      left:50%;
      transform: translateX(-50%);
      z-index:80;
      background:rgba(255,90,106,.14);
      border:1px solid rgba(255,90,106,.35);
      padding:10px 14px;
      border-radius:999px;
      font-weight:1000;
      color:var(--text);
    }
    #stealPopup.hidden{ display:none; }

    #stealAnim.hidden{ display:none; }
    #stealAnim{
      position:fixed;
      inset:0;
      z-index:85;
      pointer-events:none;
    }
    #stealChip{
      position:absolute;
      padding:10px 14px;
      border-radius:999px;
      background:rgba(0,0,0,.78);
      border:1px solid rgba(255,255,255,.16);
      font-weight:1000;
      transform: translate(-50%,-50%);
      opacity:0;
    }
    #stealChip.flyNow{
      animation: fly 0.7s ease-out forwards;
    }
    #stealChip{
      --dx: 50vw;
      --dy: 50vh;
    }
    @keyframes fly{
      0%{ opacity:0; transform: translate(-50%,-50%) scale(.95); }
      12%{ opacity:1; }
      100%{ opacity:0; left: var(--dx); top: var(--dy); transform: translate(-50%,-50%) scale(1.03); }
    }

    /* Utility */
    .hidden{ display:none; }
  </style>
</head>
